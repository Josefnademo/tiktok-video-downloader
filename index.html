<!DOCTYPE html>
<html lang="en">
  <body
    style="font-family: monospace; padding: 20px; background: #222; color: #fff"
  >
    <h2>Media Downloader (Debug Mode)</h2>

    <input
      type="text"
      id="urlInput"
      placeholder="TikTok Link..."
      style="width: 70%; padding: 8px"
    />
    <button id="downloadBtn" style="padding: 8px">Download</button>

    <div
      id="status"
      style="
        margin-top: 20px;
        white-space: pre-wrap;
        border: 1px solid #444;
        padding: 10px;
      "
    >
      Waiting...
    </div>

    <script>
      const statusDiv = document.getElementById("status");
      const btn = document.getElementById("downloadBtn");

      function log(msg) {
        statusDiv.textContent += "\n" + msg;
        console.log(msg); // Also logs to DevTools console
      }

      btn.onclick = async () => {
        const url = document.getElementById("urlInput").value.trim();
        if (!url) return;

        statusDiv.textContent = "Processing...";
        btn.disabled = true;

        try {
          // Call the API
          const result = await window.api.downloadVideo(url);

          if (result.success) {
            log(`✅ DONE! File saved:\n${result.path}`);
          } else {
            log(`❌ ERROR:\n${result.error}`);
          }
        } catch (e) {
          log(`❌ CRITICAL UI ERROR: ${e.message}`);
        }

        btn.disabled = false;
      };
    </script>
  </body>
</html>
