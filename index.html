<!DOCTYPE html>
<html lang="en">
  <body
    style="font-family: monospace; padding: 20px; background: #222; color: #fff"
  >
    <h2>Media Downloader</h2>

    <div style="margin-bottom: 10px">
      <input
        type="text"
        id="urlInput"
        placeholder="Paste TikTok URL here..."
        style="width: 70%; padding: 8px"
      />
      <button id="downloadBtn" style="padding: 8px; cursor: pointer">
        Download
      </button>
    </div>

    <div
      id="status"
      style="
        white-space: pre-wrap;
        border: 1px solid #444;
        padding: 10px;
        background: #111;
        min-height: 100px;
      "
    >
      Ready...
    </div>

    <script>
      const statusDiv = document.getElementById("status");
      const btn = document.getElementById("downloadBtn");

      function log(msg) {
        statusDiv.textContent += "\n" + msg;
        console.log(msg);
      }

      btn.onclick = async () => {
        const url = document.getElementById("urlInput").value.trim();
        if (!url) return alert("Please enter a URL");

        statusDiv.textContent = "Processing...";
        btn.disabled = true;

        try {
          // Call backend
          const result = await window.api.downloadVideo(url);

          if (result.success) {
            log(`✅ SUCCESS!\nFile saved at: ${result.path}`);
          } else {
            log(`❌ ERROR: ${result.error}`);
          }
        } catch (e) {
          log(`❌ SYSTEM ERROR: ${e.message}`);
        }

        btn.disabled = false;
      };
    </script>
  </body>
</html>
